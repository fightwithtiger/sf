import{_ as s,c as n,o as a,a as p}from"./app.d22e55b7.js";const l="/sf/assets/image-20221008200237137.bec0591e.png",e="/sf/assets/image-20221009101131948.b311c2c2.png",u=JSON.parse('{"title":"react\u57FA\u7840\u77E5\u8BC6","description":"","frontmatter":{},"headers":[{"level":2,"title":"react\u7684jsx\u8BED\u6CD5","slug":"react\u7684jsx\u8BED\u6CD5","link":"#react\u7684jsx\u8BED\u6CD5","children":[]},{"level":2,"title":"vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom","slug":"vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom","link":"#vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom","children":[]},{"level":2,"title":"\u5173\u4E8Ereact\u4E2DsetState\u66F4\u65B0\u89C6\u56FE","slug":"\u5173\u4E8Ereact\u4E2Dsetstate\u66F4\u65B0\u89C6\u56FE","link":"#\u5173\u4E8Ereact\u4E2Dsetstate\u66F4\u65B0\u89C6\u56FE","children":[]},{"level":2,"title":"\u95EE\u9898\u4E00","slug":"\u95EE\u9898\u4E00","link":"#\u95EE\u9898\u4E00","children":[]},{"level":2,"title":"\u95EE\u9898\u4E8C","slug":"\u95EE\u9898\u4E8C","link":"#\u95EE\u9898\u4E8C","children":[]},{"level":2,"title":"react\u5408\u6210\u4E8B\u4EF6","slug":"react\u5408\u6210\u4E8B\u4EF6","link":"#react\u5408\u6210\u4E8B\u4EF6","children":[]},{"level":2,"title":"\u4E8B\u4EF6\u4EE3\u7406","slug":"\u4E8B\u4EF6\u4EE3\u7406","link":"#\u4E8B\u4EF6\u4EE3\u7406","children":[]},{"level":2,"title":"\u5408\u6210\u4E8B\u4EF6","slug":"\u5408\u6210\u4E8B\u4EF6","link":"#\u5408\u6210\u4E8B\u4EF6","children":[]},{"level":2,"title":"react\u4E2Dref","slug":"react\u4E2Dref","link":"#react\u4E2Dref","children":[]},{"level":2,"title":"React.createRef","slug":"react-createref","link":"#react-createref","children":[]},{"level":2,"title":"\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref","slug":"\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref","link":"#\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref","children":[]},{"level":2,"title":"\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref","slug":"\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref","link":"#\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref","children":[]},{"level":2,"title":"\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref","slug":"\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref","link":"#\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref","children":[]},{"level":2,"title":"\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898","slug":"\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898","link":"#\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898","children":[]}],"relativePath":"frame/react.md","lastUpdated":1665568231000}'),o={name:"frame/react.md"},r=p(`<h1 id="react\u57FA\u7840\u77E5\u8BC6" tabindex="-1">react\u57FA\u7840\u77E5\u8BC6 <a class="header-anchor" href="#react\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a></h1><h2 id="react\u7684jsx\u8BED\u6CD5" tabindex="-1">react\u7684jsx\u8BED\u6CD5 <a class="header-anchor" href="#react\u7684jsx\u8BED\u6CD5" aria-hidden="true">#</a></h2><p>\u5728react\u4E2D\u4E66\u5199jsx\uFF0C\u5176\u5B9E\u5728\u8FD0\u884C\u65F6\u56DE\u88ABbabel\u8FDB\u884C\u4E00\u6B21\u7F16\u8BD1\u8F6C\u6362\uFF0C\u7F16\u8BD1\u6210React.createElemnt\u51FD\u6570\u5D4C\u5957\u7684\u5F62\u5F0F\uFF0C\u7C7B\u4F3C\u4E8Evue\u4E2D\u7684render\u51FD\u6570\uFF0C\u7136\u4F1A\u7ED3\u679C\u5176\u5B9E\u5C31\u662F\u4E00\u7CFB\u5217\u7684h\u51FD\u6570\u6267\u884C\u7ED3\u679C\uFF0C\u4E5F\u5C31\u662Fvnode\u3002</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> jsx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">border</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">JSX</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// jsx = React.createElement(&#39;div&#39;, {</span></span>
<span class="line"><span style="color:#676E95;">//  className: &quot;border&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span><span style="color:#676E95;">// , React.createElement(&quot;h1&quot;, {}, &quot;JSX&quot;))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="`+l+`" alt="image-20221008200237137"></p><p>\u6240\u4EE5\u600E\u4E48\u53BB\u751F\u6210\u8FD9\u4E2Ajsx\u7F16\u8BD1\u540E\u7684vnode\u672C\u8EAB\u4E0D\u9700\u8981\u6211\u4EEC\u5173\u5FC3\uFF0Creact\u5229\u7528babel\u53BB\u505A\u4E86\u8FD9\u4E2A\u64CD\u4F5C\uFF0C\u540E\u9762\u6D89\u53CA\u5230vnode\u600E\u4E48\u8F6C\u6362\u6210\u771F\u662Fdom\u624D\u662F\u9700\u8981\u53BB\u8003\u8651\u7684\u3002</p><h2 id="vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom" tabindex="-1">vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom <a class="header-anchor" href="#vnode\u8F6C\u6362\u4E3A\u771F\u5B9Edom" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u7684vnode\u5176\u5B9E\u4E0D\u7B49\u4E8Ejsx\u76F4\u63A5\u751F\u6210\u7684vnode\uFF0C\u800C\u662F\u7ECF\u8FC7react\u52A0\u5DE5\u540E\u7684vnode\uFF0C\u4E5F\u5C31\u662Ffiber\u8282\u70B9\uFF0C\u540E\u7EED\u8FD8\u662F\u7EDF\u4E00\u53EB\u4F5Cvnode\u3002</p><p>\u8F6C\u6362\u6210\u771F\u5B9Edom\u5176\u5B9E\u4E5F\u5F88\u7B80\u5355\uFF0Cvnode\u4E0A\u6709\u4E2Atype\u5C5E\u6027\uFF0C\u53EF\u4EE5\u6839\u636Etype\u7684\u503C\u6765\u8FDB\u884C\u5224\u65AD\uFF0C\u4E3B\u8981\u6709\uFF1Ahtml\u6807\u7B7E\uFF0C\u6587\u672C\uFF0C\u51FD\u6570\u5F0F\u7EC4\u4EF6\uFF0C\u7C7B\u7EC4\u4EF6\uFF0Cfragment\u3002</p><p>\u6240\u4EE5\u5728\u521B\u5EFA\u771F\u5B9Edom\u7684\u65F6\u5019\u5C31\u8981\u533A\u5206\u4E0A\u9762\u7684\u51E0\u79CD\u60C5\u51B5\uFF0C\u505A\u4E0D\u540C\u7684\u64CD\u4F5C\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">isStr</span><span style="color:#A6ACCD;">(type)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5982\u679C\u662F\u666E\u901A\u8282\u70B9</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">updateHostComponent</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">isFn</span><span style="color:#A6ACCD;">(type)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isClassComponent</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">updateClassComponent</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#F07178;">) </span><span style="color:#676E95;">// \u6839\u636EisClassComponent\u5224\u65AD\u662F\u5426\u662F\u7C7B\u7EC4\u4EF6\u6216\u8005\u51FD\u6570\u7EC4\u4EF6</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">updateFunctionComponent</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5982\u679C\u662Ffragment</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">updateFragmentComponent</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateHostComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stateNode</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stateNode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">updateNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stateNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">reconcileChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateFunctionComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">type</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">reconcileChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateClassComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">type</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">render</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">reconcileChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateFragmentComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">reconcileChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wip</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><ul><li>\u5982\u679C\u5F53\u524Dvnode\u662F\u666E\u901Ahtml\u8282\u70B9\u65F6\uFF0C\u53EA\u9700\u8981\u521B\u5EFAtype\u7C7B\u578B\u7684html\u6807\u7B7E\uFF0C\u7136\u540E\u5C06props\u5C5E\u6027\u90FD\u6DFB\u52A0\u5230\u521B\u5EFA\u7684dom\u4E0A\u53BB\u5373\u53EF\uFF0C\u5BF9\u4E8Eprops\u540E\u7EED\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5982\u679C\u662Fstyle\u5BF9\u8C61\uFF0C\u5219\u8981\u5355\u72EC\u62FF\u51FA\u6765\uFF0C\u904D\u5386style\u91CC\u7684\u5C5E\u6027\u7136\u540E\u6DFB\u52A0\u5230dom.style\u4E0A\u53BB\uFF0C\u5982\u679C\u662Fchildren\u5219\u8981\u8DF3\u8FC7\uFF0C\u56E0\u4E3Achildren\u8981\u7528\u5728\u540E\u7EED\u9012\u5F52\u521B\u5EFA\u771F\u5B9Edom\u4E0A\uFF0C\u5982\u679C\u662F\u4EE5on\u5F00\u5934\u7684\uFF0C\u5219\u662F\u4E8B\u4EF6\uFF0C\u4E5F\u8981\u5355\u72EC\u505A\u5904\u7406\uFF0C\u5982\u679C\u662F\u5176\u4ED6\u7684\u666E\u901A\u5C5E\u6027\u90A3\u5C31\u76F4\u63A5\u6DFB\u52A0\u5230dom\u4E0A\u5373\u53EF\u3002</li><li>\u5982\u679C\u662F\u7C7B\u7EC4\u4EF6\uFF0C\u6CE8\u610F\uFF0C\u5728react\u4E2D\u7F16\u5199\u7C7B\u7EC4\u4EF6\u7684\u65F6\u5019\u662F\u8981\u7EE7\u627FReact.Component\u7236\u7C7B\u7684\uFF0C\u6240\u4EE5\u8FD9\u4E2A\u7EE7\u627F\u7684\u7236\u7C7B\u5176\u5B9E\u5C31\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u8BB8\u591A\u5C5E\u6027\u548C\u65B9\u6CD5\uFF0C\u6BD4\u5982\uFF1Athis.props, this.state, this.foreUpdate\u7B49\u7B49\u3002\u56E0\u4E3A\u7C7B\u548C\u51FD\u6570\u7528typeof\u5224\u65AD\u7ED3\u679C\u90FD\u662Ffunction\uFF0C\u6240\u4EE5\u5728\u7C7B\u4E0A\uFF0C\u4F1A\u6DFB\u52A0\u4E00\u4E2A\u5C5E\u6027\uFF0C\u6BD4\u5982isClassComponent\u6765\u6807\u8BC6\u662F\u5426\u662F\u7C7B\u7EC4\u4EF6\u3002\u800C\u5BF9\u7C7B\u7EC4\u4EF6\u521B\u5EFAvnode\u4E5F\u5F88\u7B80\u5355\uFF0C\u76F4\u63A5new\u4E00\u4E0B\uFF0C\u7136\u540E\u628Aprops\u5F53\u4F5C\u53C2\u6570\u4F20\u8FDB\u53BB\uFF0C\u6700\u540E\u6267\u884C\u7C7B\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u7684render\u65B9\u6CD5\u5C31\u4F1A\u5F97\u5230vnode\u4E86\uFF0C\u63A5\u7740\u5C31\u662F\u7528vnode\u53BB\u521B\u5EFA\u771F\u5B9Edom\u4E86\u3002\u9012\u5F52\u8FC7\u7A0B\u3002</li><li>\u5982\u679C\u662F\u51FD\u6570\u7EC4\u4EF6\uFF0C\u76F4\u63A5\u6267\u884Ctype\u8FD9\u4E2A\u65B9\u6CD5\u5373\u53EF\uFF0C\u53C2\u6570\u5C31\u662Fprops\uFF0C\u5F97\u5230\u7684\u7ED3\u679C\u5C31\u662F\u4E4B\u540E\u7684vnode\uFF0C\u7136\u540E\u5229\u7528vnode\u53BB\u521B\u5EFA\u771F\u5B9Edom\uFF0C\u9012\u5F52\u8FC7\u7A0B\u3002</li><li>\u5982\u679C\u662Ffragment\uFF0C\u5B83\u7684props.children\u5C31\u662F\u5B83\u7684\u5B50\u8282\u70B9\u7684vnode\uFF0C\u76F4\u63A5\u7528\u5B83\u7684props.children\uFF08vnode)\uFF0C\u53BB\u521B\u5EFA\u771F\u5B9Edom\u5373\u53EF\u3002</li></ul><p>\u6CE8\u610F\u5176\u5B9E\u5728\u4E0A\u9762\u7684\u8FC7\u7A0B\u91CC\uFF0C\u4F1A\u5F80vnode\u8282\u70B9\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u5C5E\u6027\u7528\u4E8E\u540E\u7EED\u64CD\u4F5C\u4F7F\u7528\u3002</p><h2 id="\u5173\u4E8Ereact\u4E2Dsetstate\u66F4\u65B0\u89C6\u56FE" tabindex="-1">\u5173\u4E8Ereact\u4E2DsetState\u66F4\u65B0\u89C6\u56FE <a class="header-anchor" href="#\u5173\u4E8Ereact\u4E2Dsetstate\u66F4\u65B0\u89C6\u56FE" aria-hidden="true">#</a></h2><p>\u5728react\u7C7B\u7EC4\u4EF6\u91CC\uFF0C\u901A\u8FC7\u8C03\u7528setState\u6765\u66F4\u65B0state\u6570\u636E\uFF0C\u89C6\u56FE\u66F4\u65B0\u3002\u8FD9\u91CC\u4F1A\u6709\u51E0\u4E2A\u95EE\u9898\uFF1A</p><ol><li>setState\u540C\u6B65\u5F02\u6B65\uFF1F</li><li>\u5728\u4E00\u4E2A\u51FD\u6570\u4E2D\u591A\u6B21\u8C03\u7528setState\uFF0C\u9488\u5BF9\u540C\u4E00\u4E2A\u503C\u6539\u53D8\uFF0C\u89C6\u56FE\u66F4\u65B0\u51E0\u6B21\uFF1F</li></ol><h2 id="\u95EE\u9898\u4E00" tabindex="-1">\u95EE\u9898\u4E00 <a class="header-anchor" href="#\u95EE\u9898\u4E00" aria-hidden="true">#</a></h2><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">stat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u672C\u8D28\u5C31\u662F\u505A\u4E00\u6B21\u5408\u5E76\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#676E95;">// this.state = { ...this.state, ...partialState}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>setState\u662F\u4E00\u79CD\u56DE\u8C03\u5F0F\u7684\u5F02\u6B65\uFF0C\u4E0D\u540C\u4E8E\u5F02\u6B65\u4EFB\u52A1\u3002</p><p>setState\u7684\u4F5C\u7528\u5176\u5B9E\u5C31\u662F\u53BB\u66F4\u65B0this.state\u4E2D\u7684\u67D0\u4E2A\u5C5E\u6027\uFF0C\u4F46\u662F\u66F4\u884C\u8FD9\u4E00\u6B65\u7684\u64CD\u4F5C\u7684\u6267\u884C\u65F6\u673A\u662F\u770Breact\u4E2D\u5185\u90E8\u7684\u4E00\u4E2A\u53D8\u91CF\uFF0C\u8FD9\u91CC\u6682\u65F6\u628A\u5B83\u53EB\u505AisBatchUpdate\u3002</p><p>\u5728react\u7684\u4E8B\u4EF6\u4E2DisBatchUpdate\u4F1A\u88AB\u8BBE\u7F6E\u6210true\uFF0C\u4E8E\u662FsetState\u63A5\u6536\u5230\u7684\u5BF9\u8C61\u5C31\u4F1A\u88AB\u63A8\u5165\u4E00\u4E2A\u961F\u5217\u4E2D\uFF0C\u800C\u4E0D\u4F1A\u7ACB\u5373\u5408\u5E76\u5230this.state\u4E2D\u3002\u6700\u540E\u901A\u8FC7\u8C03\u7528api\u6765\u4E00\u6B21\u6027\u66F4\u65B0state\uFF0C\u8FD9\u5C31\u9020\u6210\u4E86setState\u4EFF\u4F5B\u662F\u5F02\u6B65\u7684\u6548\u679C\u3002</p><p>\u4E0E\u4E4B\u76F8\u5BF9\u7684\uFF0C\u5982\u679C\u662F\u5728setTimeout\u8FD9\u79CD\u6D4F\u89C8\u5668api\u4E2D\u53BB\u8C03\u7528setState\uFF0CisBatchUpdate\u5C31\u662Ffalse\uFF0C\u5219\u4F1A\u7ACB\u5373\u66F4\u65B0state\uFF0C\u5C31\u51FA\u73B0\u4E86\u540C\u6B65\u7684\u6548\u679C\u3002</p><h2 id="\u95EE\u9898\u4E8C" tabindex="-1">\u95EE\u9898\u4E8C <a class="header-anchor" href="#\u95EE\u9898\u4E8C" aria-hidden="true">#</a></h2><p>\u89C6\u56FE\u66F4\u65B0\u4E00\u6B21\uFF0C\u5373\u4F7F\u662F\u901A\u8FC7\u56DE\u8C03\u7684\u5F62\u5F0F\u53BB\u66F4\u65B0state\uFF0C\u89C6\u56FE\u4E5F\u53EA\u66F4\u65B0\u4E00\u6B21\uFF0C\u6362\u79CD\u8BF4\u6CD5\u5C31\u662F\uFF0Creact\u53EA\u4F1A\u7528\u6700\u65B0\u7684state\u53BB\u66F4\u65B0\u89C6\u56FE\u3002</p><p>\u6BD4\u5982\uFF1A</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#676E95;">// this.state.num = 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">stat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">stat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">stat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6700\u7EC8\u7ED3\u679Cthis.state.num === 1 -----true</span></span>
<span class="line"><span style="color:#676E95;">// \u89C6\u56FE\u4E5F\u53EA\u4F1A\u6E32\u67D3\u4E00\u6B21</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\u5728react\u51FD\u6570\u4E2D\uFF0C\u8C03\u7528\u4E86\u4E09\u6B21setState\uFF0C\u7531\u4E8E\u5F02\u6B65\u6279\u91CF\u66F4\u65B0state\uFF0C\u6240\u4EE5\u4E09\u6B21\u8BBE\u7F6Estate.num\u5176\u5B9E\u90FD\u662F\u8BBE\u7F6E\u4E3A\u4E861\u3002</p><p>\u800C\u961F\u5217\u91CC\u5176\u5B9E\u653E\u4E86\u4E09\u4E2ApartialState\u7684\u503C\uFF0C\u5982\u4E0B</p><p><code>const queue = [ {num: this.state.num + 1}, {num: this.state.num + 1}, {num: this.state.num + 1} ]</code></p><p>\u90A3\u4E48\u5728\u5408\u5E76state\u65F6\u7684\u8FC7\u7A0B\u5982\u4E0B</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#676E95;">// this.state = { num: 0 }</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> newState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...{</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...{</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...{</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> newState</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u63A5\u7740\u518D\u7528\u6700\u65B0\u7684state\u53BB\u8C03\u7528class.render\u6216\u8005\u6267\u884C\u51FD\u6570\u7EC4\u4EF6\uFF0C\u5F97\u5230\u6700\u65B0\u7684vnode</span></span>
<span class="line"><span style="color:#676E95;">// \u518D\u7528vnode\u53BB\u66F4\u65B0\u771F\u5B9Edom</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u6240\u4EE5\u65E0\u8BBAsetState\u8C03\u7528\u4E86\u591A\u5C11\u6B21\uFF0CnewVnode\u53EA\u4F1A\u751F\u6210\u4E00\u6B21\uFF0C\u89C6\u56FE\u4E5F\u53EA\u4F1A\u66F4\u65B0\u4E00\u6B21\u3002</p><h2 id="react\u5408\u6210\u4E8B\u4EF6" tabindex="-1">react\u5408\u6210\u4E8B\u4EF6 <a class="header-anchor" href="#react\u5408\u6210\u4E8B\u4EF6" aria-hidden="true">#</a></h2><p>\u5728jsx\u8BED\u6CD5\u4E2D\uFF0C\u5982\u679C\u8981\u7ED1\u5B9A\u4E8B\u4EF6\uFF0C\u5FC5\u987B\u5F97\u7528on\u5F00\u5934\u7684\u5F62\u5F0F\uFF0C\u6BD4\u5982</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ClassComponent</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleClick</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click me</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5176\u4E2D\uFF0C\u5173\u4E8Ethis\u7ED1\u5B9A\u539F\u56E0\u662F\u56E0\u4E3A\u540E\u7EED\u76F8\u5F53\u4E8E\u4E00\u4E2A\u51FD\u6570\u8D4B\u503C\u64CD\u4F5C\uFF0C\u91CC\u9762\u7684this\u4F1A\u4E22\u5931\uFF0C\u6240\u4EE5\u8981bind\u4E0Bthis\uFF0C\u4E5F\u53EF\u4EE5\u5728constructor\u91CC\u7ED1\u5B9Athis\uFF0C\u6216\u8005\u7528\u7BAD\u5934\u51FD\u6570\u7684\u5F62\u5F0F\u53BB\u58F0\u660E\u51FD\u6570\u3002</p><p>\u5F97\u5230\u7684vnode\u662F\u8FD9\u4E2A\u6837\u5B50</p><p><img src="`+e+`" alt="image-20221009101131948"></p><p>\u53EF\u4EE5\u770B\u5230\u5728props\u91CC\u5C31\u4F1A\u6709\u4E00\u4E2AonClick\u65B9\u6CD5\u3002</p><p>\u4E0B\u9762\u7B80\u5355\u70B9\u5904\u7406\u5176\u5B9E\u5C31\u53EF\u4EE5\u628AonClick\u8F6C\u6362\u6210\u5C0F\u5199\uFF1Aonclick\uFF0C\u7136\u540E\u521B\u5EFA\u51FA\u771F\u5B9Edom\u540E\u901A\u8FC7\u8BBE\u7F6Edom.onclick = fn\u5373\u53EF\uFF0C\u8FD9\u91CC\u5C31\u662Fdom0\u7EA7\u4E8B\u4EF6\u7684\u7ED1\u5B9A\u3002</p><h2 id="\u4E8B\u4EF6\u4EE3\u7406" tabindex="-1">\u4E8B\u4EF6\u4EE3\u7406 <a class="header-anchor" href="#\u4E8B\u4EF6\u4EE3\u7406" aria-hidden="true">#</a></h2><p>\u4E0D\u8FC7react\u5229\u7528\u4E86\u4E8B\u4EF6\u5192\u6CE1\u6765\u8FDB\u884C\u7684\u4E8B\u4EF6\u7ED1\u5B9A\uFF0C\u5177\u4F53\u5982\u4E0B</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#676E95;">// \u6839\u636Evnode\u521B\u5EFA\u771F\u5B9Edom</span></span>
<span class="line"><span style="color:#676E95;">// \u5728\u771F\u5B9Edom\u4E0A\u521B\u5EFA\u4E8B\u4EF6\u6C60\uFF0C\u5C06\u4E8B\u4EF6\u8BBE\u7F6E\u5230\u4E8B\u4EF6\u6C60\u4E0A</span></span>
<span class="line"><span style="color:#A6ACCD;">dom[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">store</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">dom</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">onclick </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5728document\u4E0A\u7ED1\u5B9Aonclick\u4E8B\u4EF6\uFF0C\u8FD9\u4E2Aonclick\u4E8B\u4EF6\u5982\u4E0B</span></span>
<span class="line"><span style="color:#A6ACCD;">document[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">onclick</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">evnet</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">eventType</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">on</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toLowerCase</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">eventType</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u5C06\u6279\u91CF\u8DDF\u65B0\u6807\u8BC6\u8BBE\u7F6E\u4E3Atrue</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#82AAFF;">fn</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#F07178;">) </span><span style="color:#676E95;">// \u6267\u884C\u7ED1\u5B9A\u7684\u70B9\u51FB\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u8C03\u7528\u6279\u91CF\u66F4\u65B0\u51FD\u6570\uFF0C\u7ED3\u675F\u540E\u5C06\u6279\u91CF\u66F4\u65B0\u6807\u8BC6\u8BBE\u7F6E\u4E3Afalse</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u8FD9\u91CC\u76F4\u63A5\u62FF\u5230target\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5728target\u7684\u4E8B\u4EF6\u6C60\u91CC\u627E\u5230\u5BF9\u5E94\u7684\u4E8B\u4EF6\uFF0C\u628Aevent\u5F53\u4F5C\u53C2\u6570\u4F20\u5165\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u6267\u884C\u5BF9\u5E94\u51FD\u6570\u4E86\u3002</p><h2 id="\u5408\u6210\u4E8B\u4EF6" tabindex="-1">\u5408\u6210\u4E8B\u4EF6 <a class="header-anchor" href="#\u5408\u6210\u4E8B\u4EF6" aria-hidden="true">#</a></h2><p>\u5BF9\u4E8Ereact\u7684\uFF0C\u70B9\u51FB\u4E8B\u4EF6\u4E2D\u62FF\u5230\u7684event\u53C2\u6570\uFF0C\u53EF\u4EE5\u770B\u5230\u4E0D\u662F\u539F\u751F\u7684NativeEvent\uFF0C\u800C\u662Freact\u81EA\u5DF1\u521B\u9020\u7684\u4E00\u4E2A\u5408\u6210\u4E8B\u4EF6\u5BF9\u8C61\uFF0C\u5176\u5B9E\u539F\u751F\u65F6\u95F4\u4E0A\u7684\u5927\u591A\u6570\u5C5E\u6027\u5728react\u5408\u6210\u4E8B\u4EF6\u4E0A\u90FD\u6709\uFF0C\u4E4B\u6240\u4EE5\u8981\u591A\u52A0\u4E00\u5C42\u7684\u539F\u56E0\u4E3B\u8981\u662F\u53EF\u4EE5\u517C\u5BB9\u591A\u5E73\u53F0\uFF0C\u6BD4\u5982\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\uFF0C\u4E0D\u540C\u6D4F\u89C8\u5668\u662F\u4E0D\u540C\u7684\uFF0C\u4F46\u662F\u5728\u5408\u6210\u4E8B\u4EF6\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u6DFB\u52A0\u4E00\u4E2ApreventDefault\u65B9\u6CD5\uFF0C\u7136\u540E\u8FD9\u4E2A\u65B9\u6CD5\u91CC\u9762\u53BB\u505A\u517C\u5BB9\u3002\u5728react\u5408\u6210\u4E8B\u4EF6\u91CC\u4E5F\u6709\u4E00\u4E2AnativeEvent\u5C5E\u6027\u6765\u6307\u5411\u771F\u6B63\u7684\u539F\u751F\u4E8B\u4EF6\uFF0C\u53EF\u4EE5\u4F9B\u540E\u7EED\u4F7F\u7528\u3002</p><h2 id="react\u4E2Dref" tabindex="-1">react\u4E2Dref <a class="header-anchor" href="#react\u4E2Dref" aria-hidden="true">#</a></h2><h2 id="react-createref" tabindex="-1">React.createRef <a class="header-anchor" href="#react-createref" aria-hidden="true">#</a></h2><p>\u5728react\u4E2D\u5982\u679C\u662F\u7C7B\u7EC4\u4EF6\u4E2D\u4F7F\u7528ref\u9700\u8981\u6211\u4EEC\u8C03\u7528React.createRef\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\uFF0C\u800Chooks\u5219\u4F7F\u7528useRef\u51FD\u6570\u8FDB\u884C\u521B\u5EFA\uFF0C\u539F\u7406\u5176\u5B9E\u90FD\u4E00\u6837\u3002\u4E0B\u9762\u901A\u8FC7React.createRef\u6765\u521B\u5EFAref</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ClassComponent2</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRef</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleClick</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">focus()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">click</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u5728react\u4E2D\u4F7F\u7528ref\uFF0C\u53EA\u9700\u8981\u5728\u6807\u7B7E\u4E0A\u6DFB\u52A0ref\u5C5E\u6027\uFF0C\u503C\u5C31\u662F\u6211\u4EEC\u901A\u8FC7React.createRef\u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u7136\u540E\u901A\u8FC7this.inputRef.current\u5219\u53EF\u4EE5\u64CD\u4F5Cdom\u3002\u6240\u4EE5\uFF0CReact.createRef\u7684\u51FD\u6570\u5C31\u5F88\u597D\u5B9E\u73B0\u4E86</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRef</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">refObject</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        current</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">seal</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">refObject</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">refObject</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u5176\u5B9E\u5C31\u662F\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u91CC\u9762\u6709\u4E00\u4E2Acurrent\u5C5E\u6027\uFF0C\u7136\u540E\u5229\u7528Object.seal\u8BA9\u8FD9\u4E2A\u5BF9\u8C61\u53D8\u5F97\u65E0\u6CD5\u88AB\u5916\u754C\u64CD\u4F5C\uFF08\u6DFB\u52A0\u5220\u9664\u5C5E\u6027\uFF09\uFF0C\u8FD9\u6837\u540E\u7EEDdom\u6216\u8005\u7EC4\u4EF6\u5B9E\u4F8B\u53EA\u80FD\u901A\u8FC7current\u5C5E\u6027\u6765\u83B7\u53D6\u4E86\u3002</p><p>\u81F3\u4E8E\u4E3A\u4EC0\u4E48\u8981\u7528\u4E00\u4E2A\u5BF9\u8C61\u6765\u4FDD\u5B58ref\uFF0C\u6700\u540E\u53EA\u6709current\u53D1\u6325\u4F5C\u7528\u6307\u5411\u771F\u5B9Edom\u5462\uFF1F</p><p>\u5176\u5B9E\u5F88\u7B80\u5355\uFF0C\u5728input\u6807\u7B7E\u4E0A\u6211\u4EEC\u901A\u8FC7\u8BBE\u7F6E<code>ref={this.inputRef}</code>,\u90A3\u4E48\u540E\u7EED\u5728\u521B\u5EFA\u771F\u5B9Edom\u65F6\u5019\u5C31\u4E00\u5B9A\u6709\u4E2A\u64CD\u4F5C\u5C31\u662F\u628A\u521B\u5EFA\u597D\u7684\u771F\u5B9Edom\u8D4B\u503C\u7ED9ref\u6307\u5411\u7684this.inputRef\uFF0C\u4F46\u662F\u5982\u679Cthis.inputRef\u662F\u4E00\u4E2A\u57FA\u672C\u7C7B\u578B\uFF0Cinput\u6807\u7B7E\u4E0A\u4FDD\u5B58\u7684ref\u503C\u5C31\u4E0D\u662F\u4E00\u4E2A\u5BF9\u8C61\u7684\u5730\u5740\u800C\u662Fthis.inputRef\u7684\u503C\uFF0C\u8FD9\u6837\u5C31\u505A\u4E0D\u5230\u4FDD\u5B58dom\u4E86\u3002\u6240\u4EE5createRef\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0Cinput\u6807\u7B7E\u4E0A\u7684ref\u4FDD\u5B58\u7684\u5C31\u662Fthis.inputRef\u7684\u5730\u5740\uFF0C\u5728\u4FDD\u5B58dom\u65F6\u6211\u53EA\u9700\u8981\u8FD9\u6837\u5199<code>ref.current = dom</code>\u5373\u53EF\u3002\u6839\u636E\u5F15\u7528\u5730\u5740\uFF0C\u5728\u51FD\u6570\u8C03\u7528\u65F6\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7this.inputRef.current\u62FF\u5230\u521A\u521A\u8BBE\u7F6E\u4E0A\u53BB\u7684dom\u4E86\u3002</p><h2 id="\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref" tabindex="-1">\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref <a class="header-anchor" href="#\u539F\u751F\u6807\u7B7E\u4E0A\u7684ref" aria-hidden="true">#</a></h2><p>\u7EE7\u7EED\u6765\u770B\u539F\u751Fhtml\u6807\u7B7E\u4E0A\u7684ref\u662F\u600E\u4E48\u8BBE\u7F6E\u4E0A\u53BB\u7684</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ClassComponent2</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRef</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleClick</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">focus()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">click</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u539F\u7406\u5C31\u662F\u5BF9\u4E8E\u5F53\u524Dinput\u7684jsx\u8BED\u6CD5\u7CD6\u751F\u6210\u7684vnode\u6765\u8BF4\uFF0C\u6BD4\u5982\u4E0B\u9762\u8FC7\u7A0B\u7684\u4F2A\u4EE3\u7801</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#A6ACCD;">inputVode </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">props</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">ref</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">inputDom </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createDom</span><span style="color:#A6ACCD;">(inputVnode)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">inputVnode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> inputDom</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u6309\u7167\u4E0A\u9762\u6B65\u9AA4\u5C31\u53EF\u4EE5\u628Adom\u8BBE\u7F6E\u4E0A\u53BB\u4E86\u3002\u6700\u540E\u901A\u8FC7this.inputRef.current\u65E2\u53EF\u4EE5\u62FF\u5230\u6807\u7B7E\u7684\u771F\u5B9Edom\u4E86</p><h2 id="\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref" tabindex="-1">\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref <a class="header-anchor" href="#\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref" aria-hidden="true">#</a></h2><p>\u4E0B\u9762\u8FD9\u4E2A\u4F8B\u5B50\uFF0C\u6211\u5C06ref\u8BBE\u7F6E\u5230class\u7EC4\u4EF6\u4E0A\u9762</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Demo</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRef</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getFocus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">focus()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Outer</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">demoRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRef</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleClick</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">demoRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">getFocus()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Demo</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">demoRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">click</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5982\u679C\u662F\u7C7B\u7EC4\u4EF6\u4E0A\u7684ref\uFF0C\u5219\u8BE5ref\u7684current\u6307\u5411\u7684\u662F\u8FD9\u4E2A\u7C7B\u7EC4\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u5F88\u597D\u7406\u89E3\uFF0C\u7C7B\u7EC4\u4EF6\u9876\u5C42\u4E0D\u662F\u4E00\u4E2Ahtml\u6807\u7B7E\uFF0C\u6240\u4EE5\u6839\u672C\u4E0D\u53EF\u80FD\u6709\u771F\u5B9Edom\uFF0C\u6240\u4EE5react\u4E2D\u5C31\u628A\u5B83\u7684ref\u6307\u5411\u4E86\u8BE5\u7EC4\u4EF6\u7684\u7C7B\u5B9E\u4F8B\u4E0A\u3002</p><p>\u65B9\u6CD5\u4E5F\u5F88\u7B80\u5355\uFF0C\u7B2C\u4E00\u6B21\u6E32\u67D3\u8FD9\u4E2A\u7C7B\u7EC4\u4EF6\u7684\u65F6\u5019\u4E00\u5B9A\u4F1Anew\u4E00\u4E2A\u5B83\u7684\u5B9E\u4F8B\uFF0C\u90A3\u4E48\u5C31\u5728\u8FD9\u65F6\u628A\u8BE5\u7C7B\u5B9E\u4F8B\u8BBE\u7F6E\u5230props.ref.current\u4E0A\u5373\u53EF\u3002</p><h2 id="\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref" tabindex="-1">\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref <a class="header-anchor" href="#\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0A\u7684ref" aria-hidden="true">#</a></h2><p>\u51FD\u6570\u5F0F\u7EC4\u4EF6\u7684ref\u6539\u53D8\u5F88\u5927\u7684\uFF0C\u5982\u679C\u76F4\u63A5\u7ED9\u51FD\u6570\u5F0F\u7EC4\u4EF6\u8BBE\u7F6Eref\uFF0C\u63A7\u5236\u53F0\u4F1A\u62A5\u9519\uFF0C\u9700\u8981\u4F7F\u7528react\u63D0\u4F9B\u7684\u65B9\u5F0F\u53BB\u58F0\u660E\u51FD\u6570\u5F0F\u7EC4\u4EF6\u624D\u80FD\u5F80\u4E0A\u9762\u8BBE\u7F6E\u4E0Aref\uFF0C\u53C2\u8003\u6587\u6863<a href="https://react.docschina.org/docs/forwarding-refs.html" target="_blank" rel="noreferrer">https://react.docschina.org/docs/forwarding-refs.html</a></p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> FancyButton </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forwardRef</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">} </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">FancyButton</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F60\u53EF\u4EE5\u76F4\u63A5\u83B7\u53D6 DOM button \u7684 ref\uFF1A</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ref </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRef</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">FancyButton</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">Click me!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">FancyButton</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u8FD9\u6837\u5C31\u53EF\u4EE5\u83B7\u53D6\u5230\u51FD\u6570\u7EC4\u4EF6\u91CCbutton\u7684\u771F\u5B9Edom\u4E86\uFF0C\u4E0B\u9762\u6765\u7B80\u5355\u5B9E\u73B0\u4E0BReact.forwardRef\u65B9\u6CD5</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forwardRef</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fn</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u53D8\u6210vnode\u540E\u7684\u5927\u81F4\u5F62\u5F0F</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      $$typeof</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react.forward_ref</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      render</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u8FD9\u6837\u5728\u53D8\u6210vnode\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u901A\u8FC7type\u4E0A\u7684$$typeof\u53BB\u5224\u65AD\u8FD9\u662F\u4E00\u4E2AforwardRef\u5305\u88F9\u7684\u7EC4\u4EF6\uFF0C\u901A\u8FC7type.render\u6267\u884C\u5373\u53EF\u5F97\u5230\u771F\u6B63\u51FD\u6570\u5F0F\u7EC4\u4EF6\u7684vnode\uFF0C\u540C\u65F6\uFF1A</p><div class="language-jsx line-numbers-mode"><button class="copy"></button><span class="lang">jsx</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ref </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> props</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> vnode </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> type</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">(props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ref)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FD9\u6837\u51FD\u6570\u5F0F\u5B50\u7EC4\u4EF6\u5C31\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E8C\u4E2A\u53C2\u6570ref\u6765\u62FF\u5230\u4E0A\u5C42\u4F20\u8FDB\u6765\u7684ref\u5BF9\u8C61\uFF0C\u7136\u540E\u5B50\u7EC4\u4EF6\u4E2D\u518D\u628A\u8FD9\u4E2Aref\u8BBE\u7F6E\u5230\u5BF9\u5E94\u7684\u6807\u7B7E\u4E0A\u53BB\u5B8C\u4E8B\u3002</p><h2 id="\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898" tabindex="-1">\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898 <a class="header-anchor" href="#\u7C7B\u7EC4\u4EF6\uFF0C\u51FD\u6570\u7EC4\u4EF6\u65E0\u771F\u5B9Edom\u95EE\u9898" aria-hidden="true">#</a></h2><p>\u5728\u6E90\u7801\u4E2D\u6709\u9700\u8981\u83B7\u53D6\u7C7B\u7EC4\u4EF6\u540E\u8005\u51FD\u6570\u7EC4\u4EF6\u4E0A\u7684dom\u6765\u8FDB\u884C\u66F4\u65B0\u7684\u64CD\u4F5C\uFF0C\u4F46\u662F\u5B83\u4EEC\u6CA1\u6709\uFF0C\u6240\u4EE5\u5C31\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u9012\u5F52\u64CD\u4F5C\uFF0C\u627E\u5B83\u7684\u5B50vnode\uFF0C\u4E0A\u9762\u53BB\u62FF\u5B50vnode\u7684\u771F\u5B9Edom\uFF0C\u5982\u679C\u8FD8\u6CA1\u6709\uFF0C\u5C31\u7EE7\u7EED\u9012\u5F52\u4E0B\u53BB\u3002</p><h1 id="\u4F7F\u7528react-hook\u4E2D\u9047\u5230\u7684\u6700\u96BE\u7684\u95EE\u9898" tabindex="-1">\u4F7F\u7528react hook\u4E2D\u9047\u5230\u7684\u6700\u96BE\u7684\u95EE\u9898 <a class="header-anchor" href="#\u4F7F\u7528react-hook\u4E2D\u9047\u5230\u7684\u6700\u96BE\u7684\u95EE\u9898" aria-hidden="true">#</a></h1><p><a href="https://react.docschina.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" target="_blank" rel="noreferrer">https://react.docschina.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies</a></p><h1 id="setstate\u4EC0\u4E48\u65F6\u5019\u4F1A\u8FDB\u884C\u540C\u6B65\u64CD\u4F5C" tabindex="-1">setState\u4EC0\u4E48\u65F6\u5019\u4F1A\u8FDB\u884C\u540C\u6B65\u64CD\u4F5C <a class="header-anchor" href="#setstate\u4EC0\u4E48\u65F6\u5019\u4F1A\u8FDB\u884C\u540C\u6B65\u64CD\u4F5C" aria-hidden="true">#</a></h1><p><a href="https://blog.csdn.net/qq_43182723/article/details/106802413" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_43182723/article/details/106802413</a><a href="https://stackoverflow.com/questions/48563650/does-react-keep-the-order-for-state-updates/48610973#48610973" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/48563650/does-react-keep-the-order-for-state-updates/48610973#48610973</a><a href="https://github.com/facebook/react/issues/11527" target="_blank" rel="noreferrer">https://github.com/facebook/react/issues/11527</a></p>`,80),c=[r];function t(F,D,y,i,C,A){return a(),n("div",null,c)}const d=s(o,[["render",t]]);export{u as __pageData,d as default};
